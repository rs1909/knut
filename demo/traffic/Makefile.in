CXXFLAGS = @NOWARN_CXXFLAGS@
CXX=@CXX@

NAME = sys-traffic

DSFILES = Makefile.in $(NAME).cpp \
	cfile-start-a cfile-start-b \
	cfile-ns-a cfile-ns-b \
	cfile-nssw-a cfile-nssw-b \
	cfile-lp-a cfile-lp-b

$(NAME).so: ../../src/pddesys.h
	$(CXX) $(CXXFLAGS) -fPIC --shared -I../../src -o $(NAME).so $(NAME).cpp

distdir:
	cp -pR $(DSFILES) $(distdir)

clean:
	if { test -f *.so; } then rm *.so; fi

install: $(NAME).so
	
all: $(NAME).so
	
test1: $(NAME).so
	pdde -c cfile-start-a -o out-start-a -b br-start-a
	pdde -c cfile-start-b -o out-start-b -b br-start-b
	pdde -c cfile-ns-a -i out-start-a -o out-ns-a -b br-ns-a
	pdde -c cfile-ns-b -i out-start-b -o out-ns-b -b br-ns-b

test2: out-start-a 
	pdde -c cfile-nssw-a -i out-start-a -o out-nssw-a -b br-nssw-a

test3: out-start-b
	pdde -c cfile-nssw-b -i out-start-b -o out-nssw-b -b br-nssw-b

test4: out-nssw-a
	pdde -c cfile-lp-a -i out-nssw-a -o out-lp-a -b br-lp-a

test5: out-nssw-b
	pdde -c cfile-lp-b -i out-nssw-b -o out-lp-b -b br-lp-b
